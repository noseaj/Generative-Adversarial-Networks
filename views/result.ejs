<!doctype html>
<html>
  <head></head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link href="/public/main.css" rel="stylesheet">
    <title>Result</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  </head>
  <body>
    <%- include('nav.html') %>
    <main class="container">
    <h4 class="text-center" style="margin-top: 20px;">생성된 이미지</h4>
    <p class="text-center"></p>
    <div style="width:800px; height:520px;display: block; margin: 0px auto;" >
      <img id="img" src="../public/images/result.jpg" class="img-fluid" alt="abnormal image">
      <div class="d-grid gap-2 d-md-flex justify-content-md-end">
        <a class="btn btn-primary" href="/" style="margin-top: 15px; margin-right: 5px; background-color: #3E2F51;">처음으로 돌아가기</a>
        <button class="btn btn-primary" type="button" id="GetFile" style="margin-top: 15px;background-color: #3E2F51;">다운로드</button>
    </div>
    </div>
    <div style=" display: block; margin: 0px auto;">
    <p class="text-center"></p>
    </div>
    </main>
    <%- include('footer.html') %> 
    <script>
   $('#GetFile').on('click', function () {
    $.ajax({
        url:"../public/images/result.jpg",
        method: 'GET',
        xhrFields: {
            responseType: 'blob'
        },
        success: function (data) {
            var a = document.createElement('a');
            var url = window.URL.createObjectURL(data);
            a.href = url;
            a.download = 'images.jpg';
            document.body.append(a);
            a.click();
            a.remove();
            window.URL.revokeObjectURL(url);
        }
    });
});
    </script>
    
  </body>
</html>